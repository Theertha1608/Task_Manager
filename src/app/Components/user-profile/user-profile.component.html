<app-side-nav></app-side-nav>

<div class="user-profile-container">
  <div class="user-details">
    <h1>User Profile</h1>
    <p>Email: {{ user.email }}</p>
    <div *ngIf="!editMode" class="profile-info">
      <p><img [src]="profileImageUrl" alt="Profile Picture" class="profile-image"></p>
      <p class="username">Username: {{ user.username }}</p>
    </div>
    
    <!-- Edit mode form -->
    <div *ngIf="editMode" class="edit-mode-form">
      <div>
        <label>Username:</label>
        <input type="text" [(ngModel)]="user.username" class="edit-username">
      </div>
      <div>
        <label>Profile Picture:</label>
        <input type="file" (change)="onFileSelected($event)" class="edit-profile-picture">
      </div>
    </div>
    
    <!-- Edit and Save buttons -->
    <button class="button" (click)="toggleEditMode()">{{ editMode ? 'Cancel' : 'Edit' }}</button>
    <button class="button save-button" *ngIf="editMode" (click)="saveUserDetails()">Save</button>
  </div>

  <!-- Change Password Section -->
  <div class="change-password-">
  <div *ngIf="editMode" class="change-password">
    <h2>Change Password</h2>
    <form [formGroup]="changePasswordForm" (ngSubmit)="savePassword()" class="password-form">
      <div>
        <label>Current Password:</label>
        <input type="password" formControlName="currentPassword" class="current-password">
      </div>
      <div>
        <label>New Password:</label>
        <input type="password" formControlName="newPassword" class="new-password">
      </div>
      <div>
        <label>Confirm New Password:</label>
        <input type="password" formControlName="confirmPassword" class="confirm-password">
      </div>
      <button type="submit" class="button save-password-button">Save Password</button>
    </form>
  </div>
  </div>
</div>